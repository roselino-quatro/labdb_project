{% extends 'base.html' %}
{% block title %}Instalações | Funcionário{% endblock %}

{% block content %}
<section class="space-y-6">
    <header class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-2xl font-semibold text-gray-900">Instalações</h1>
            <p class="mt-1 text-sm text-gray-500">Monitore agendamentos e disponibilidade diária.</p>
        </div>
        <form class="flex flex-wrap gap-3 text-sm">
            <label class="text-gray-600">
                Data
                <input type="date" name="data" value="{{ filtros.data }}" class="ml-2 rounded border border-gray-300 px-3 py-2 focus:border-uspprimary focus:outline-none focus:ring-1 focus:ring-uspprimary" />
            </label>
            <label class="text-gray-600">
                Status
                <select name="status" class="ml-2 rounded border border-gray-300 px-3 py-2 focus:border-uspprimary focus:outline-none focus:ring-1 focus:ring-uspprimary">
                    {% for option in status_options %}
                    <option value="{{ option.value }}" {% if option.selected %}selected{% endif %}>{{ option.label }}</option>
                    {% endfor %}
                </select>
            </label>
            <button type="submit" class="rounded bg-uspprimary px-4 py-2 font-semibold text-white hover:bg-uspsecondary hover:text-uspprimary">Filtrar</button>
        </form>
    </header>

    <div class="grid gap-4 lg:grid-cols-2">
        {% for instalacao in instalacoes %}
        <article class="rounded-lg bg-white p-5 shadow">
            <div class="flex items-start justify-between">
                <div>
                    <h2 class="text-lg font-semibold text-gray-900">{{ instalacao.nome }}</h2>
                    <p class="mt-1 text-xs text-gray-500">Capacidade {{ instalacao.capacidade }} · Responsável {{ instalacao.responsavel }}</p>
                </div>
                <span class="rounded bg-{{ instalacao.badge_color }}-100 px-2 py-1 text-xs font-semibold text-{{ instalacao.badge_color }}-800">{{ instalacao.status }}</span>
            </div>
            <dl class="mt-4 grid gap-3 text-sm text-gray-600">
                <div class="flex items-center justify-between">
                    <dt>Próxima reserva</dt>
                    <dd>{{ instalacao.proxima_reserva }}</dd>
                </div>
                <div class="flex items-center justify-between">
                    <dt>Duração média</dt>
                    <dd>{{ instalacao.duracao_media }} h</dd>
                </div>
                <div class="flex items-center justify-between">
                    <dt>Total reservas hoje</dt>
                    <dd>{{ instalacao.reservas_dia }}</dd>
                </div>
            </dl>
            <div class="mt-4 flex justify-end gap-2 text-sm">
                <a href="{{ instalacao.agenda_url }}" class="rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-100">Ver agenda</a>
                <a href="{{ instalacao.registrar_url }}" class="rounded bg-uspsecondary px-3 py-1 font-semibold text-white hover:bg-uspprimary">Registrar uso</a>
            </div>
        </article>
        {% else %}
        <p class="col-span-full text-center text-gray-500">Nenhuma instalação disponível.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
